
sudo tc qdisc del dev ens3 root ; 

sudo tc qdisc add dev ens3 root handle 1: netem delay 23ms
sudo tc qdisc add dev ens3 parent 1: handle 2: tbf rate 80Mbit latency 0.1ms burst 32000

sudo tc filter add dev ens3 protocol ip parent 1: prio 1 u32 match ip dst 128.205.11.0/24 flowid 2:1


sudo tc qdisc del dev ens3 root ; 

sudo tc qdisc add dev ens3 root handle 1: prio priomap 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2
sudo tc qdisc add dev ens3 parent 1:1 handle 10: netem delay 23ms
sudo tc qdisc add dev ens3 parent 10: handle 20: tbf rate 80Mbit latency 0.1ms burst 32000

sudo tc filter add dev ens3 protocol ip parent 1:0 prio 1 u32 match ip dst 128.205.11.0/24 flowid 1:1

sudo tc filter add dev ens3 parent 1:0 protocol ip u32 match ip dst 128.205.11.0/24 flowid 1:2

sudo tc qdisc del dev ens3 root ;
sudo tc qdisc add dev ens3 root handle 1: prio priomap 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
sudo tc qdisc add dev ens3 parent 1:1 handle 10: tbf rate 80Mbit latency 0.1ms burst 40000
sudo tc qdisc add dev ens3 parent 10: handle 20: netem delay 23ms
sudo tc filter add dev ens3 protocol ip parent 1:0 prio 1 u32 match ip dst 128.205.11.0/24 flowid 1:1

